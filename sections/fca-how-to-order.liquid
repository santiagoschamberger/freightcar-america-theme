{%- style -%}
  @font-face {
    font-family: 'Outage';
    src: url('{{ 'Outage.ttf' | asset_url }}') format('truetype');
    font-weight: normal;
    font-style: normal;
    font-display: swap;
  }

  @font-face {
    font-family: 'Gotham';
    src: url('{{ 'Gotham-Book.otf' | asset_url }}') format('opentype');
    font-weight: 400;
    font-style: normal;
    font-display: swap;
  }

  @font-face {
    font-family: 'Gotham';
    src: url('{{ 'Gotham-Medium.otf' | asset_url }}') format('opentype');
    font-weight: 500;
    font-style: normal;
    font-display: swap;
  }

  @font-face {
    font-family: 'Gotham';
    src: url('{{ 'Gotham-Bold.otf' | asset_url }}') format('opentype');
    font-weight: 700;
    font-style: normal;
    font-display: swap;
  }

  .fca-how-to-order {
    position: relative;
    min-height: 780px;
    display: flex;
    align-items: center;
    background: {% if section.settings.background_image %}url('{{ section.settings.background_image | image_url }}'){% else %}#FFFFFF{% endif %};
    background-size: cover;
    background-position: center;
    color: #00205B;
    overflow: hidden;
  }

  .fca-how-to-order__container {
    width: 100%;
    margin: 0 auto;
    padding: 0;
    position: relative;
  }

  .fca-how-to-order__title {
    font-family: 'Outage', sans-serif;
    font-weight: 700;
    font-size: 60px;
    line-height: 1.2;
    text-align: center;
    margin-bottom: 80px;
    color: #122F5B;
    padding: 0 20px;
  }

  /* Red highlight class for title text */
  .fca-how-to-order .red-highlight {
    color: #D31244;
    display: inline;
    background: none;
    padding: 0;
    clip-path: none;
  }

  .fca-how-to-order .red-highlight::before {
    display: none;
  }

  .fca-how-to-order__slideshow {
    height: 400px;
    margin-bottom: 80px;
  }

  .fca-how-to-order__slide {
    display: grid;
    grid-template-columns: 40% 1fr;
    gap: 0;
    align-items: center;
    height: 400px;
  }

  .fca-how-to-order__image-column {
    height: 100%;
    position: relative;
    overflow: hidden;
  }

  .fca-how-to-order__step-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    object-position: center;
    display: block;
  }

  .fca-how-to-order__content-column {
    background: #FFFFFF;
    padding: 60px 80px;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    position: relative;
  }

  .fca-how-to-order__step-title {
    font-family: 'Gotham', sans-serif;
    font-weight: 700;
    font-size: 24px;
    line-height: 1.08;
    color: #D31244;
    margin: 0 0 12px 0;
    position: relative;
    z-index: 1;
  }

  .fca-how-to-order__step-description {
    font-family: 'Gotham', sans-serif;
    font-weight: 400;
    font-size: 20px;
    line-height: 1.3;
    color: #00205B;
    margin: 0;
    position: relative;
    z-index: 1;
  }

  .fca-how-to-order__navigation {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 40px;
    margin-top: 40px;
    position: relative;
    width: 100%;
    margin-left: auto;
    margin-right: auto;
  }

  .fca-how-to-order__progress {
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .fca-how-to-order__progress-dot {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #D9D9D9;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
  }

  .fca-how-to-order__progress-dot.active {
    background: #D31244;
    transform: scale(1.1);
  }

  .fca-how-to-order__progress-dot:hover {
    transform: scale(1.05);
  }

  .fca-how-to-order__arrow {
    width: 32px;
    height: 32px;
    background: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    border: none;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .fca-how-to-order__arrow:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  .fca-how-to-order__arrow svg {
    width: 21px;
    height: 21px;
  }

  .fca-how-to-order__button {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    background: #D31244;
    color: white;
    padding: 20px 24px 17px;
    text-decoration: none;
    font-family: 'Outage', sans-serif;
    font-weight: 700;
    font-size: 20px;
    line-height: 1;
    border-radius: 0;
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
    margin-top: 60px;
  }

  .fca-how-to-order__button:hover {
    background: #BF0D3D;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(211, 18, 68, 0.3);
  }

  @media (max-width: 768px) {
    .fca-how-to-order {
      min-height: 600px;
      padding: 60px 0;
    }

    .fca-how-to-order__container {
      padding: 0 20px;
    }

    .fca-how-to-order__title {
      font-size: 32px;
      margin-bottom: 40px;
      text-align: left;
    }

    .fca-how-to-order__slideshow {
      height: auto;
      margin-bottom: 40px;
    }

    .fca-how-to-order__slide {
      display: flex;
      flex-direction: column;
      grid-template-columns: none;
      height: auto;
    }

    .fca-how-to-order__image-column {
      width: 100%;
      height: 250px;
      order: 1;
    }

    .fca-how-to-order__content-column {
      width: 100%;
      padding: 40px 30px;
      order: 2;
      height: auto;
    }

    .fca-how-to-order__navigation {
      margin-top: 20px;
      gap: 20px;
    }

    .fca-how-to-order__arrow {
      display: none;
    }
  }

  @media (max-width: 480px) {
    .fca-how-to-order__container {
      padding: 0 16px;
    }

    .fca-how-to-order__title {
      font-size: 28px;
    }

    .fca-how-to-order__image-column {
      height: 200px;
    }

    .fca-how-to-order__content-column {
      padding: 30px 20px;
    }

    .fca-how-to-order__step-title {
      font-size: 20px;
    }

    .fca-how-to-order__step-description {
      font-size: 16px;
    }
  }
{%- endstyle -%}

{{ 'component-slider.css' | asset_url | stylesheet_tag }}
{{ 'component-slideshow.css' | asset_url | stylesheet_tag }}

<section class="fca-how-to-order">
  <div class="fca-how-to-order__container">
    {%- if section.settings.title != blank -%}
      <h2 class="fca-how-to-order__title">
        {%- if section.settings.red_highlight_text != blank -%}
          {%- assign red_replacement = '<span class="red-highlight">' | append: section.settings.red_highlight_text | append: '</span>' -%}
          {%- assign highlighted_title = section.settings.title | replace: section.settings.red_highlight_text, red_replacement -%}
          {{ highlighted_title }}
        {%- else -%}
          {{ section.settings.title }}
        {%- endif -%}
      </h2>
    {%- endif -%}
    
    <slideshow-component class="fca-how-to-order__slideshow" role="region" aria-roledescription="How to Order Steps" aria-label="How to Order Process">
      {%- if section.blocks.size > 1 -%}
        <div class="slideshow__controls slideshow__controls--top slider-buttons">
          <button
            type="button"
            class="slider-button slider-button--prev"
            name="previous"
            aria-label="Previous step"
            aria-controls="Slider-{{ section.id }}"
          >
            <span class="svg-wrapper">
              {{- 'icon-caret.svg' | inline_asset_content -}}
            </span>
          </button>
          <div class="slider-counter slider-counter--dots">
            <div class="slideshow__control-wrapper">
              {%- for block in section.blocks -%}
                <button
                  class="slider-counter__link slider-counter__link--dots link"
                  aria-label="Go to step {{ forloop.index }}"
                  aria-controls="Slider-{{ section.id }}"
                >
                  <span class="dot"></span>
                </button>
              {%- endfor -%}
            </div>
          </div>
          <button
            type="button"
            class="slider-button slider-button--next"
            name="next"
            aria-label="Next step"
            aria-controls="Slider-{{ section.id }}"
          >
            <span class="svg-wrapper">
              {{- 'icon-caret.svg' | inline_asset_content -}}
            </span>
          </button>
        </div>
      {%- endif -%}

      <div
        class="slideshow banner grid grid--1-col slider slider--everywhere"
        id="Slider-{{ section.id }}"
        aria-live="polite"
        aria-atomic="true"
        data-autoplay="false"
        data-speed="5"
      >
        {%- for block in section.blocks -%}
          <div
            class="slideshow__slide grid__item grid--1-col slider__slide fca-how-to-order__slide"
            id="Slide-{{ section.id }}-{{ forloop.index }}"
            {{ block.shopify_attributes }}
            role="group"
            aria-roledescription="Step"
            aria-label="{{ forloop.index }} of {{ forloop.length }}"
            tabindex="-1"
          >
            <div class="fca-how-to-order__image-column">
              {%- if block.settings.image != blank -%}
                <img src="{{ block.settings.image | image_url }}" 
                     alt="{{ block.settings.title | escape }}" 
                     class="fca-how-to-order__step-image">
              {%- else -%}
                {%- assign step_images = 'number1.png,number2.png,number3.png,number4.png' | split: ',' -%}
                {%- assign image_name = step_images[forloop.index0] -%}
                <img src="{{ image_name | asset_url }}" 
                     alt="{{ block.settings.title | escape }}" 
                     class="fca-how-to-order__step-image">
              {%- endif -%}
            </div>
            <div class="fca-how-to-order__content-column">
              {%- if block.settings.title != blank -%}
                <h3 class="fca-how-to-order__step-title">{{ block.settings.title }}</h3>
              {%- endif -%}
              {%- if block.settings.description != blank -%}
                <p class="fca-how-to-order__step-description">{{ block.settings.description }}</p>
              {%- endif -%}
            </div>
          </div>
        {%- endfor -%}
      </div>
    </slideshow-component>

    {%- if section.settings.button_text != blank and section.settings.button_url != blank -%}
      <div style="text-align: center; padding: 0 20px;">
        <a href="{{ section.settings.button_url }}" class="fca-how-to-order__button">
          {{ section.settings.button_text }}
        </a>
      </div>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "FCA How to Order",
  "tag": "section",
  "class": "section-fca-how-to-order",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "How to Order"
    },
    {
      "type": "text",
      "id": "red_highlight_text",
      "label": "Text to Highlight (Red)",
      "default": "ORDER",
      "info": "This text will be highlighted in red in the title"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Request an account"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button URL"
    }
  ],
  "blocks": [
    {
      "type": "step",
      "name": "Order Step",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Step Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Step Title",
          "default": "Step Title"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Step Description",
          "default": "Step description goes here."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "FCA How to Order",
      "settings": {
        "title": "How to Order",
        "red_highlight_text": "ORDER",
        "button_text": "Request an account"
      },
      "blocks": [
        {
          "type": "step",
          "settings": {
            "title": "Create an Account",
            "description": "Set up a quick, secure account to manage your orders and track your parts."
          }
        },
        {
          "type": "step",
          "settings": {
            "title": "Browse Our Catalog",
            "description": "Search through our extensive inventory of railcar parts and components."
          }
        },
        {
          "type": "step",
          "settings": {
            "title": "Place Your Order",
            "description": "Add items to your cart and complete your order with secure checkout."
          }
        },
        {
          "type": "step",
          "settings": {
            "title": "Track & Receive",
            "description": "Monitor your order status and receive your parts on time."
          }
        }
      ]
    }
  ]
}
{% endschema %} 